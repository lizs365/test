(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{639:function(n,e){n.exports="\x3c!--\ntitle: Docker相关\nsort: 2\n--\x3e\n\n## 安装\n```shell\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\nyum install -y docker-ce\n\ncurl -L https://github.com/docker/compose/releases/download/1.20.1/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose\nyum install bash-completion\n\nsystemctl restart docker / service docker restart\n```\n\n## 快速进入容器\n命令简介：\n```bash\n#下载\nwget git.io/doc.sh -O /bin/dcin && chmod a+x /bin/dcin\n#用法\ndcin containerid\n```\n\n## 常用命令\n```bash\n$ sudo docker exec -it 775c7c9ee1e1 /bin/bash\n\n$ sudo docker inspect -f {{.State.Pid}} 44fc0f0582d9\n$ sudo nsenter --target 3326 --mount --uts --ipc --net --pid\n\ndocker stats/top/diff cid\n\ndocker rm $(docker ps -a -q)\ndocker tag imageid repository:tag\ndocker update --restart=always containerid\n\n#清理所有未打过标签的本地镜像：\ndocker rmi $(docker images -q -f \"dangling=true\")\n#有关容器和镜像的底层信息:\ndocker inspect container/image\n#从容器内复制文件到指定的路径上：\ndocker cp container:path hostpath\n\n#docker.image=/var/lib/docker\n#curl ip:5000/v2/hello-world/tags/list\n```\n\n## 容器如何获取宿主机docker0网卡IP？\n```bash\n#通过容器/etc/profile(hosts)文件,下面2条命令是等效的\n--add-host host:$(ip -4 addr show docker0 | grep -Po 'inet \\K[\\d.]+') \\\n--add-host host:$(/sbin/ip route|awk '/docker0/ { print $9}') \\\n\n#通过容器环境变量,下面2条命令是等效的\n-e DOCKER_HOST=$(ip -4 addr show docker0 | grep -Po 'inet \\K[\\d.]+') \\\n-e DOCKER_HOST=$(/sbin/ip route|awk '/docker0/ { print $9}') \\\n```\n\n## 镜像分析\ndive\n"}}]);